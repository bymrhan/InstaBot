'use strict';function Fa(a,b){b=a.i(b);a=l(new r(a.g),[b]);a.i.push(2);q(a,void 0)}function Ga(a,b,c){let d=0,e=a.length;for(;d<e;){let f=(d+e)/2|0,h=c(a[f],b);if(0===h)return f;0>h?d=f+1:e=f}return-d-1}
function Ha(a,b){return`<td><span class="switch-root${b?" inherited":""}"><span class="switch-buttonBase${a?" checked":""}"><span class="switch-button"><input class="switch-input" type="checkbox"><span class="switch-thumb"></span></span><span class="switch-touchRipple"></span></span><span class="switch-track"></span></span></td>`}
function N(a){let {v:b,l:c,j:d}=a;a=0!==(c&1);let e=0!==(c&2),f=0!==(d&1),h=0!==(d&2);return`<tr><td>${b||"("+chrome.i18n.getMessage("default")+")"}</td><td>${b?'<div class="trash-button-base circle clickable"><img src="./assets/svg/garbage-can.svg" width="17" height="17"></div>':""}</td>${Ha(a,e)}${Ha(f,h)}</tr>`};function Ia(a,b){a.firstElementChild.classList.toggle(Ja,0!==(b&1));a.classList.toggle(Ka,0!==(b&2))}function La(a,b){a=u(O(a));let c=a.length,d=b.length;for(let e=1;;e++){let f=a[c-e],h=b[d-e];if(g(f))return g(h)?0:-1;if(g(h))return 1;if(f<h)return-1;if(f>h)return 1}}function O(a){a=a.firstElementChild.textContent;a.startsWith("(")&&(a="");return a}var Ja="checked",Ka="inherited";const Ma={v:"",l:null,j:null};function Na(a,b){return a.h<b?-1:a.h>b?1:0}function P(a,b){"l"in b&&(a.s.l=b.l);"j"in b&&(a.s.j=b.j)}function Q(a,b){let c=a.h;b.v&&(c+="."+b.v);var d=a.s.l;a=a.s.j;return{v:c,l:null==d?b.l|2:d?1:0,j:null==a?b.j|2:a?1:0}}function Oa(a,b,c){let {K:d,I:e}=Pa(a,u(b),Ma);P(d,c);return{K:d,I:Q(d,e)}}function R(a,b){let c=b.pop();return g(c)?a:R(Qa(a,c),b)}function Qa(a,b){let c=Ga(a.g,b,Na);if(0<=c)return a.g[c];b=new Ra(b);a.g.splice(-c-1,0,b);return b}
function Pa(a,b,c){let d=b.pop();return g(d)?{K:a,I:c}:Pa(Qa(a,d),b,Q(a,c))}function*S(a,b){g(a.s.l)&&g(a.s.j)||(yield b);for(let c of a.g)yield*S(c,Q(c,b))}var Ra=class{constructor(a){this.h=a;this.s={l:void 0,j:void 0};this.g=[]}};const T=new A("sync","JS2."),U=new A("sync","CSS.");function Sa(){return new Promise(a=>{q(n(l(new r(chrome.storage.sync),null)),a)})}function Ta(a,b,c){let d,e=t(a.i,b);g(e)?(e=t(a.h,b),g(e)||(d={j:c})):d={l:c};return{D:e,s:d}}function Ua(a){var b=V;chrome.storage.onChanged.addListener((c,d)=>{if("sync"===d)for(let [h,v]of Object.entries(c)){c=a;let {D:m,s:Aa}=Ta(b,h,v.newValue);if(!g(Aa)){var {K:e,I:f}=Oa(b.g,m,Aa);c(m,S(e,f))}}})}
const V=new class{constructor(a,b){this.i=a;this.h=b;this.g=new Ra("")}}(T,U);function W(){var a=X;var b=V.g;b=S(b,Q(b,Ma));b=Va(b);let c="";for(let d of b)c+=N(d);a.o.innerHTML=c}function Y(a,b,c){let d=Ga(a.g,u(b),La);b=c&&c.v===b;0>d?(d=-d-1,b?(b=d,g(a.g[b])?a.o.insertAdjacentHTML("beforeend",N(c)):a.g[b].insertAdjacentHTML("beforebegin",N(c))):c&&Z(a,d,c)):b?Z(a,d,c):(a.g[d].remove(),d--);return d}
function Z(a,b,c){g(c.l)||Ia(a.g[b].children[2].firstElementChild,c.l);g(c.j)||Ia(a.g[b].children[3].firstElementChild,c.j)}function Wa(){var a=X,b=Xa;a.i.addEventListener("input",()=>{a.h.classList.contains("search")&&b()})}function Ya(){var a=X,b=Za;a.i.addEventListener("keypress",c=>{a.h.classList.contains("search")||13===c.keyCode&&b(a.i.value)});a.i.previousSibling.previousSibling.addEventListener("click",()=>{b(a.i.value)})}
function $a(){var a=ab,b=bb,c=cb;X.o.addEventListener("click",d=>{d=d.target;d="lookupPrefix"in d?1===d.nodeType?d:d.parentElement:void 0;if(d)if("INPUT"===d.nodeName&&d.classList.contains("switch-input")){d=d.closest("td");let e=d.parentElement,f=O(e),h=d.firstElementChild.firstElementChild.classList.contains(Ja);d===e.children[2]?b(f,h):c(f,h)}else(d.classList.contains("trash-button-base")||d.parentElement.classList.contains("trash-button-base"))&&a(O(d.closest("tr")))})}
const X=new class{constructor(){this.o=document.getElementsByTagName("tbody")[0];this.g=this.o.children;this.h=this.o.parentElement;this.i=this.h.querySelector(".input-row input")}};(async function(){var a=V,b=await Sa();for(let d in b){let {D:e,s:f}=Ta(a,d,b[d]);if(!g(f)){var c=f;P(R(a.g,u(e)),c)}}})().then(()=>{W();Ua((a,b)=>{var c=X;b=Va(b);let {value:d,done:e}=b.next();a=Y(c,a,d);if(!e)for(let f of b)Z(c,++a,f)});$a();Wa();Ya()});
function ab(a){Fa(T,a);Fa(U,a);P(R(V.g,u(a)),{l:void 0,j:void 0});Y(X,a)}function bb(a,b){I(T,a,!b)}function cb(a,b){I(U,a,!b)}function Xa(){W()}function*Va(a){var b=X;b=b.h.classList.contains("search")?b.i.value:"";for(let c of a)c.v.includes(b)&&(yield c)}const db=/([A-Za-z]+\.)*[A-Za-z]+/;function Za(a){if(db.test(a)){({I:a}=Oa(V.g,a,{l:null,j:null}));var b=a;a=X;b=Y(a,b.v,b);a.g[b].scrollIntoView({behavior:"smooth",block:"nearest"})}}
window.Search.addEventListener("click",()=>{let a=X.h.classList;a.remove("addNew");a.add("search");W()});window.Add_New.addEventListener("click",()=>{let a=X.h.classList;a.add("addNew");a.remove("search");W()});
window.Rate.addEventListener("click",()=>{var a;(a=chrome.runtime.getManifest().update_url)?({hostname:a}=new URL(a),a=a.endsWith("google.com")?"https://chrome.google.com/webstore/detail/emfeppdfcjnldjgmofdkbggeacapegen/reviews":a.endsWith("microsoft.com")?"https://microsoftedge.microsoft.com/addons/detail/ijopbbfjlehabpldjiaipgiiedhfhbad":a.endsWith("naver.com")?"https://store.whale.naver.com/detail/bdboifadgcmidogceiohgchkmlcicagk/":"https://ultimate-enable-right-click.github.io"):a="https://ultimate-enable-right-click.github.io";
window.open(a,"_blank")});document.title=chrome.i18n.getMessage("extName");window.Help.addEventListener("click",()=>{let a;a="ko"===chrome.i18n.getUILanguage()?"https://github.com/ultimate-enable-right-click/help/blob/master/help-ko.md":"https://github.com/ultimate-enable-right-click/help/blob/master/help-en.md";window.open(a,"_blank")});chrome.runtime.sendMessage({type:2});
// Copyright 2021, Sean Lee <i73hi64d0wr5df8pckig@gmail.com>. All rights reserved.